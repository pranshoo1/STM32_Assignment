#include "stm32f0xx_hal.h"

TIM_HandleTypeDef htim2;
ADC_HandleTypeDef hadc;

uint16_t adc_value;

void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_TIM2_Init(void);
static void MX_ADC_Init(void);

int main(void)
{
  HAL_Init();
  SystemClock_Config();

  MX_GPIO_Init();
  MX_ADC_Init();
  MX_TIM2_Init();

  // ADC ready, waiting for timer trigger
  HAL_ADC_Start_IT(&hadc);

  // Timer start (100 Hz) â†’ ADC auto trigger
  HAL_TIM_Base_Start(&htim2);

  while (1)
  {
    // main loop empty
  }
}
